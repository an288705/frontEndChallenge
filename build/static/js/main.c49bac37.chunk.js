(this["webpackJsonpfront-end-challenge"]=this["webpackJsonpfront-end-challenge"]||[]).push([[0],{37:function(e,n,t){},38:function(e,n,t){"use strict";t.r(n);var i=t(1),a=t.n(i),r=t(19),s=t.n(r),c=t(15),o=t.n(c),m=t(20),l=t(22),j=t.p+"static/media/placeholder-image.bf1c6bf1.jpg",u=t(0);function b(e){var n=e.movie,t=e.removeNomination;return Object(u.jsxs)("div",{className:"movie",children:[Object(u.jsx)("div",{className:"movie__image-wrapper",children:Object(u.jsx)("img",{src:"N/A"===n.Poster?j:n.Poster,className:"image",alt:n.Title,width:"300",height:"445"})}),Object(u.jsx)("p",{className:"movieTitle",children:n.Title}),Object(u.jsx)("p",{className:"movieReleaseDate",children:n.Year}),Object(u.jsx)("p",{children:Object(u.jsx)("button",{className:"btn",onClick:function(){return t(n)},children:"Remove"})})]})}function d(e){var n=e.nominations,t=e.removeNomination;return Object(u.jsxs)("div",{children:[Object(u.jsx)("h2",{className:"nominations-header",children:" Your Nominations "}),Object(u.jsx)("div",{className:"warning-wrapper",children:5===n.length?Object(u.jsx)("p",{className:"warning",children:"You have finished nominating movies"}):null}),Object(u.jsx)("div",{className:"nominations",children:n.map((function(e,n){return Object(u.jsx)(b,{removeNomination:t,movie:e},"".concat(e.imdbID,"_").concat(n))}))})]})}function v(e){var n=e.movie,t=e.nominateMovie;function i(e,n){return!(n.findIndex((function(n){return n.imdbID===e.imdbID}))<0)}return Object(u.jsxs)("div",{className:"movie",children:[Object(u.jsx)("div",{className:"movie__image-wrapper",children:Object(u.jsx)("img",{src:"N/A"===n.Poster?j:n.Poster,className:"image",alt:n.Title,width:"300",height:"445"})}),Object(u.jsx)("p",{className:"movieTitle",children:n.Title}),Object(u.jsx)("p",{className:"movieReleaseDate",children:n.Year}),Object(u.jsx)("p",{children:Object(u.jsx)("button",{className:"btn",style:!0===i(n,e.nominations)?{cursor:"not-allowed"}:null,onClick:!0===i(n,e.nominations)?void 0:function(){return t(n)},children:"Nominate"})})]})}function O(){return Object(u.jsx)("div",{className:"loading-wrapper",children:Object(u.jsxs)("div",{className:"lds-ellipsis",children:[Object(u.jsx)("div",{}),Object(u.jsx)("div",{}),Object(u.jsx)("div",{}),Object(u.jsx)("div",{})]})})}function h(e){return Object(u.jsx)("p",{className:"error",children:e.message?e.message:"Unknown error has occurred"})}function p(e){return e.isFetchingMovies?Object(u.jsx)(O,{}):e.error.hasError?Object(u.jsx)(h,{message:e.error.message}):Object(u.jsx)("div",{className:"search-results",children:e.movies.map((function(n,t){return Object(u.jsx)(v,{movie:n,nominateMovie:e.nominateMovie,nominations:e.nominations},"".concat(n.imdbID,"_").concat(t))}))})}function x(e){var n=e.value,t=e.submitHandle,i=e.changeHandle;return Object(u.jsx)("div",{className:"form-wrapper",children:Object(u.jsxs)("form",{onSubmit:t,className:"form",children:[Object(u.jsx)("input",{type:"text",className:"form__text-input",id:"search-movie",onChange:i,value:n}),Object(u.jsx)("input",{type:"submit",className:"btn",value:"Search"})]})})}function N(e){return Object(u.jsxs)(u.Fragment,{children:[Object(u.jsx)(x,{value:e.value,submitHandle:e.submitHandle,changeHandle:e.changeHandle}),Object(u.jsx)(p,{nominateMovie:e.nominateMovie,isFetchingMovies:e.isFetchingMovies,movies:e.movies,error:e.error,nominations:e.nominations})]})}var f=t(2),E=t(4),g=t(18),_={movies:[],nominations:[],value:"",query:"",isFetchingMovies:!1,error:{hasError:!1,message:""}};function I(e,n){switch(n.type){case"SET_MOVIES":return Object(E.a)(Object(E.a)({},e),{},{movies:n.movies});case"SET_NOMINATED_MOVIES":return Object(E.a)(Object(E.a)({},e),{},{nominations:[].concat(Object(g.a)(e.nominations),[n.nomination])});case"REMOVE_NOMINATED_MOVIE":return Object(E.a)(Object(E.a)({},e),{},{nominations:function(e,n){var t=e.nominations,i=Object(g.a)(t),a=i.findIndex((function(e){return e.imdbID===n.imdbID}));return i.splice(a,1),i}(e,n.movieObject)});case"SET_VALUE":return Object(E.a)(Object(E.a)({},e),{},{value:n.value});case"SET_QUERY":return Object(E.a)(Object(E.a)({},e),{},{query:n.query});case"SET_FETCHING_INDICATOR":return Object(E.a)(Object(E.a)({},e),{},{isFetchingMovies:n.isFetchingMovies});case"SET_ERROR_INDICATOR":return Object(E.a)(Object(E.a)({},e),{},{error:Object(E.a)({},n.error)});default:return e}}function T(){var e=Object(i.useReducer)(I,_),n=Object(l.a)(e,2),t=n[0],a=n[1];return Object(i.useEffect)((function(){if(t.query){var e="https://www.omdbapi.com/?apikey=".concat("a416b7b2","&type=movie&s=").concat(t.query,"&page=1");!function(){n.apply(this,arguments)}()}function n(){return(n=Object(m.a)(o.a.mark((function n(){var t;return o.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,a({type:"SET_FETCHING_INDICATOR",isFetchingMovies:!0}),n.next=4,fetch(e).then((function(e){return e.json()}));case 4:if(!(t=n.sent).Error){n.next=8;break}return a({type:"SET_ERROR_INDICATOR",error:{hasError:!0,message:t.Error}}),n.abrupt("return");case 8:a({type:"SET_MOVIES",movies:t.Search}),n.next=14;break;case 11:n.prev=11,n.t0=n.catch(0),a({type:"SET_ERROR_INDICATOR",error:{hasError:!0,message:"Unknown error has occurred"}});case 14:return n.prev=14,a({type:"SET_FETCHING_INDICATOR",isFetchingMovies:!1}),n.finish(14);case 17:case"end":return n.stop()}}),n,null,[[0,11,14,17]])})))).apply(this,arguments)}}),[t.query]),Object(u.jsx)("main",{className:"main",children:Object(u.jsxs)(f.c,{children:[Object(u.jsx)(f.a,{exact:!0,path:"/nominations",children:Object(u.jsx)(d,{nominations:t.nominations,removeNomination:function(e){a({type:"REMOVE_NOMINATED_MOVIE",movieObject:e})}})}),Object(u.jsx)(f.a,{exact:!0,path:"/shopifyFrontEndChallenge",children:Object(u.jsx)(N,{movies:t.movies,submitHandle:function(e){e.preventDefault(),t.value?a({type:"SET_QUERY",query:t.value}):alert("Error: not a valid movie")},changeHandle:function(e){a({type:"SET_VALUE",value:e.target.value}),t.error.hasError&&a({type:"SET_ERROR_INDICATOR",error:{hasError:!1,message:""}})},nominateMovie:function(e){5!==t.nominations.length?t.nominations.findIndex((function(n){return n.imdbID===e.imdbID}))>-1?alert("Error: already nominated"):a({type:"SET_NOMINATED_MOVIES",nomination:e}):alert("Error: cannot add more than 5 nominations")},nominations:t.nominations,value:t.value,isFetchingMovies:t.isFetchingMovies,error:t.error})})]})})}var y=t(11);function M(){return Object(u.jsx)("header",{className:"header",children:Object(u.jsxs)("ul",{className:"menu",children:[Object(u.jsx)("li",{className:"menut__item",children:Object(u.jsx)(y.b,{activeClassName:"menut__active-item",to:"/shopifyFrontEndChallenge",children:"Home"})}),Object(u.jsx)("li",{className:"menut__item",children:Object(u.jsx)(y.b,{activeClassName:"menut__active-item",to:"/nominations",children:"Nominations"})})]})})}t(37);var R=function(){return Object(u.jsx)(y.a,{children:Object(u.jsxs)("div",{className:"app",children:[Object(u.jsx)(M,{}),Object(u.jsx)(T,{})]})})};s.a.render(Object(u.jsx)(a.a.StrictMode,{children:Object(u.jsx)(R,{})}),document.getElementById("root"))}},[[38,1,2]]]);
//# sourceMappingURL=main.c49bac37.chunk.js.map